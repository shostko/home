# Configure a default setup of Home Assistant (frontend, api, etc)
default_config:

# Uncomment this if you are using SSL/TLS, running in Docker container, etc.
# http:
#   base_url: example.duckdns.org:8123

# Text to speech
tts:
  - platform: google_translate

group: !include groups.yaml
automation: !include automations.yaml
script: !include scripts.yaml
zone: !include zones.yaml

panel_iframe:
  tasmoadmin:
    title: TasmoAdmin
    icon: mdi:lightbulb-on
    url: !secret tasmoadmin_host

# You can leave MAC empty if you only have one gateway.
xiaomi_aqara:
  discovery_retry: 5
  gateways:
    - key: !secret xiaomi_gateway_key
    
light:
  - platform: xiaomi_miio
    host: 192.168.1.41
    token: !secret xiaomi_bulb1_token
    model: philips.light.bulb
  - platform: mqtt
    name: "Аквариум"
    state_topic: "wled/aqua/g"
    command_topic: "wled/aqua"
    rgb_state_topic: "wled/aqua/c"
    rgb_command_topic: "wled/aqua/col"
    brightness_command_topic: "wled/aqua"
    brightness_state_topic: "wled/aqua/g"
    brightness_value_template: "{{value }} "
    rgb_command_template: "{{ '#%02x%02x%02x' | format(red, green, blue)}}"
    rgb_value_template: "{{ value[1:3] | int(base=16) }},{{ value[3:5] | int(base=16) }},{{ value[5:7]| int(base=16) }}"
    qos: 0
    optimistic: true
    on_command_type: "first"
    payload_on: "ON"
    payload_off: "OFF"
    effect_command_topic: "wled/aqua/api"
    effect_state_topic: "wled/aqua/api"
    effect_value_template: "{{ value }}"
    effect_list:
      - "[FX=00]  STATIC"
      - "[FX=01]  BLINK"
      - "[FX=02]  BREATH"
      - "[FX=03]  COLOR_WIPE"
      - "[FX=04]  COLOR_WIPE_RANDOM"
      - "[FX=05]  RANDOM_COLOR"
      - "[FX=06]  COLOR_SWEEP"
      - "[FX=07]  DYNAMIC"
      - "[FX=08]  RAINBOW"
      - "[FX=09]  RAINBOW_CYCLE"
      - "[FX=10]  SCAN"
      - "[FX=11]  DUAL_SCAN"
      - "[FX=12]  FADE"
      - "[FX=13]  THEATER_CHASE"
      - "[FX=14]  THEATER_C_RAINBOW"
      - "[FX=15]  RUNNING_LIGHTS"
      - "[FX=16]  SAW"
      - "[FX=17]  TWINKLE"
      - "[FX=18]  DISSOLVE"
      - "[FX=19]  DISSOLVE_RANDOM"
      - "[FX=20]  SPARKLE"
      - "[FX=21]  FLASH_SPARKLE"
      - "[FX=22]  HYPER_SPARKLE"
      - "[FX=23]  STROBE"
      - "[FX=24]  STROBE_RAINBOW"
      - "[FX=25]  MULTI_STROBE"
      - "[FX=26]  BLINK_RAINBOW"
      - "[FX=27]  ANDROID"
      - "[FX=28]  CHASE_COLOR"
      - "[FX=29]  CHASE_RANDOM"
      - "[FX=30]  CHASE_RAINBOW"
      - "[FX=31]  CHASE_FLASH"
      - "[FX=32]  CHASE_FLASH_RANDOM"
      - "[FX=33]  CHASE_RAINBOW_WHITE"
      - "[FX=34]  COLORFUL"
      - "[FX=35]  TRAFFIC_LIGHT"
      - "[FX=36]  COLOR_SWEEP_RANDOM"
      - "[FX=37]  RUNNING_COLOR"
      - "[FX=38]  RUNNING_RED_BLUE"
      - "[FX=39]  RUNNING_RANDOM"
      - "[FX=40]  LARSON_SCANNER"
      - "[FX=41]  COMET"
      - "[FX=42]  FIREWORKS"
      - "[FX=43]  RAIN"
      - "[FX=44]  MERRY_CHRISTMAS"
      - "[FX=45]  FIRE_FLICKER"
      - "[FX=46]  GRADIENT"
      - "[FX=47]  LOADING"
      - "[FX=48]  DUAL_COLOR_WIPE_IN_OUT"
      - "[FX=49]  DUAL_COLOR_WIPE_IN_IN"
      - "[FX=50]  DUAL_COLOR_WIPE_OUT_OUT"
      - "[FX=51]  DUAL_COLOR_WIPE_OUT_IN"
      - "[FX=52]  CIRCUS_COMBUSTUS"
      - "[FX=53]  HALLOWEEN"
      - "[FX=54]  TRICOLOR_CHASE"
      - "[FX=55]  TRICOLOR_WIPE"
      - "[FX=56]  TRICOLOR_FADE"
      - "[FX=57]  LIGHTNING"
      - "[FX=58]  ICU"
      - "[FX=59]  MULTI_COMET"
      - "[FX=60]  DUAL_LARSON_SCANNER"
      - "[FX=61]  RANDOM_CHASE"
      - "[FX=62]  OSCILLATE"
      - "[FX=63]  PRIDE_2015"
      - "[FX=64]  JUGGLE"
      - "[FX=65]  PALETTE"
      - "[FX=66]  FIRE_2012"
      - "[FX=67]  COLORWAVES"
      - "[FX=68]  BPM"
      - "[FX=69]  FILLNOISE8"
      - "[FX=70]  NOISE16_1"
      - "[FX=71]  NOISE16_2"
      - "[FX=72]  NOISE16_3"
      - "[FX=73]  NOISE16_4"
      - "[FX=74]  COLORTWINKLE"
      - "[FX=75]  LAKE"
      - "[FX=76]  METEOR"
      - "[FX=77]  METEOR_SMOOTH"
      - "[FX=78]  RAILWAY"
      - "[FX=79]  RIPPLE"

fan:
  - platform: xiaomi_miio
    host: 192.168.1.104
    model: zhimi.humidifier.ca1
    token: !secret xiaomi_humidifier_token

switch:
  - platform: mqtt
    name: "Зеркало"
    state_topic: "dressingroom/mirror/stat/RESULT"
    value_template: "{{ value_json.POWER }}"
    command_topic: "dressingroom/mirror/cmnd/POWER"
    availability_topic: "dressingroom/mirror/tele/LWT"
    state_on: "ON"
    state_off: "OFF"
    payload_on: "ON"
    payload_off: "OFF"
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    qos: 1
    retain: false
  - platform: mqtt
    name: "Шкаф"
    state_topic: "dressingroom/cupboard/stat/RESULT"
    value_template: "{{ value_json.POWER }}"
    command_topic: "dressingroom/cupboard/cmnd/POWER"
    availability_topic: "dressingroom/cupboard/tele/LWT"
    state_on: "ON"
    state_off: "OFF"
    payload_on: "ON"
    payload_off: "OFF"
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    qos: 1
    retain: false
  - platform: mqtt
    name: "Бра 2"
    state_topic: "shellies/shelly1-77294F/relay/0"
    command_topic: "shellies/shelly1-77294F/relay/0/command"
    # availability_topic: "shellies/shelly1-77294F/online"
    payload_on: "on"
    payload_off: "off"
    # payload_available: "true"
    # payload_not_available: "false"
    retain: false

media_player:
  - platform: webostv
    host:  192.168.1.130
    name: TV
    filename: webostv.conf
    timeout: 5

telegram_bot:
  # Home
  - platform: webhooks
    url: !secret white_host
    api_key: !secret telegram_home_key
    allowed_chat_ids:
      - !secret telegram_chat_sergey
      - !secret telegram_chat_alexa
    trusted_networks:
      - 172.30.33.3/32
      - 149.154.160.0/20
      - 91.108.4.0/22
  # Home Log
  - platform: webhooks
    url: !secret white_host
    api_key: !secret telegram_log_key
    allowed_chat_ids:
      - !secret telegram_chat_log
    trusted_networks:
      - 172.30.33.3/32
      - 149.154.160.0/20
      - 91.108.4.0/22

notify:
  - name: log
    platform: telegram
    chat_id: !secret telegram_chat_log
  - name: sergey
    platform: telegram
    chat_id: !secret telegram_chat_sergey
  - name: alexa
    platform: telegram
    chat_id: !secret telegram_chat_alexa
  - name: family
    platform: group
    services:
      - service: sergey
      - service: alexa
  - name: tv
    platform: webostv
    host: 192.168.1.130
    filename: webostv.conf

timer: !include includes/timer.yaml

yandex_smart_home: